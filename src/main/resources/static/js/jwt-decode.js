!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e="undefined"!=typeof globalThis?globalThis:e||self).jwt_decode=t())}(this,(function(){"use strict";function e(e){this.message=e}e.prototype=new Error,e.prototype.name="InvalidTokenError";var t,r,n=function(t,r){if("string"!=typeof t)throw new e("Invalid token specified: must be a string");var n,o=(r=r||{}).header?"0":"1";if(1!==(n=(t=t.replace(/-/g,"+").replace(/_/g,"/")).split(".")).length&&n.length<2)throw new e("Invalid token specified: invalid format");try{return JSON.parse((a=n[o],"undefined"==typeof window||"undefined"==typeof window.atob||(t=a,window.atob(t))||(t=a,decodeURIComponent(Array.prototype.map.call(atob(t),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))));var a}catch(t){throw new e("Invalid token specified: invalid json for part #"+o+" ("+t.message+")")}};return function(a,o){if("string"!=typeof a)throw new e("Invalid token specified");var i,c,f,d,p,u,l,s,b,g,w,y=(o=o||{}).header===!0;if((i=a.split(".")).length<2)throw new e("Invalid token specified");try{c=n(a,{header:!0})}catch(t){c=null}if(null==c)throw new e("Invalid token specified: invalid json for header");try{f=n(a)}catch(t){throw new e("Invalid token specified: invalid json for payload")}(d=c.alg,p=f.exp,(u=o.clockTimestamp,l=o.clockTolerance,d.toUpperCase().indexOf("HS")!=-1||(s=c,b=f,g=o,(w=g.issuer,!("string"!=typeof w||""===w.trim())&&!(Array.isArray(b.iss)||"string"!=typeof b.iss?w.indexOf(b.iss)===-1:w!==b.iss))||(function(e,t){var r,n,o;if(!("string"!=typeof t||""===t.trim()))return Array.isArray(e.sub)||"string"!=typeof e.sub?t.indexOf(e.sub)===-1:t!==e.sub})(),(function(e,t){var r,n,o,i;if(!(null==t||""===t))return"string"==typeof t&&(t=[t]),!0===(r=e.aud,n=t,o=Array.isArray(r)?r:r?[r]:[],i=Array.isArray(n)?n:n?[n]:[],o.some((function(e){return i.some((function(t){return e===t}))})))}()))),void 0!==p&&"number"==typeof u&&(("number"!=typeof l||l<0)&&(l=0),u/1e3-l>p&&t("Token expired"),u/1e3+l<p||r("Token expired")))}(i.join("."),a),f},t="function"==typeof atob,r=function(){throw new Error("Token expired")},n}));